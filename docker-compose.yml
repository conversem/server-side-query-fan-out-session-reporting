# Docker Compose for LLM Bot Traffic Analysis Pipeline
# Usage:
#   docker compose run --rm app bash                    # Interactive shell
#   docker compose run --rm app python scripts/ingest_logs.py --help

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      # Mount source code for development
      - .:/app
      # Persist data between runs
      - ./data:/app/data
    environment:
      # Cloudflare API (optional, for API-based ingestion)
      - CLOUDFLARE_API_TOKEN=${CLOUDFLARE_API_TOKEN:-}
      - CLOUDFLARE_ZONE_ID=${CLOUDFLARE_ZONE_ID:-}
    stdin_open: true
    tty: true
    working_dir: /app
